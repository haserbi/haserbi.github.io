<!doctype html><html lang=ko dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Spring 프로젝트 구조 및 공통 코드 처리 방법 | Halog</title><meta name=keywords content=","><meta name=description content="스프링 프로젝트 중 공통적인 처리에 대한 방법 및 코드 개선에 대한 내용에 대한 정리입니다.
알림
해당 글은 Spring으로 사내 프로젝트를 하면서 느낀 코드 개선 및 경험에 대한 내용입니다.
여러 개발 블로그의 경험과 노하우가 담긴 글을 참조하며, 추가한 내용입니다.
글의 내용이 정답이 아닐 수 있으며, 개인적인 생각으로 가볍게 읽어주세요. :D..
프로젝트 코드 공통 처리 및 여러 Tips 참조링크 : Spring Guide - Directory 최근 프로젝트의 구조는 아래와 같습니다.
위와 같이 패키지를 domain과 global로 나누어 환경을 구축했습니다."><meta name=author content><link rel=canonical href=https://haservi.github.io/posts/spring/spring-project-structure-proecess/><meta name=google-site-verification content="G-MXZP81P04W"><link rel=stylesheet as=style crossorigin href=https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard.css><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://haservi.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://haservi.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://haservi.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://haservi.github.io/apple-touch-icon.png><link rel=mask-icon href=https://haservi.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1400973749140762" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RP5NDCM8J9"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RP5NDCM8J9",{anonymize_ip:!1})}</script><meta property="og:title" content="Spring 프로젝트 구조 및 공통 코드 처리 방법"><meta property="og:description" content="스프링 프로젝트 중 공통적인 처리에 대한 방법 및 코드 개선에 대한 내용에 대한 정리입니다.
알림
해당 글은 Spring으로 사내 프로젝트를 하면서 느낀 코드 개선 및 경험에 대한 내용입니다.
여러 개발 블로그의 경험과 노하우가 담긴 글을 참조하며, 추가한 내용입니다.
글의 내용이 정답이 아닐 수 있으며, 개인적인 생각으로 가볍게 읽어주세요. :D..
프로젝트 코드 공통 처리 및 여러 Tips 참조링크 : Spring Guide - Directory 최근 프로젝트의 구조는 아래와 같습니다.
위와 같이 패키지를 domain과 global로 나누어 환경을 구축했습니다."><meta property="og:type" content="article"><meta property="og:url" content="https://haservi.github.io/posts/spring/spring-project-structure-proecess/"><meta property="og:image" content="https://haservi.github.io/cover.jpeg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-14T20:45:31+09:00"><meta property="article:modified_time" content="2023-10-14T20:45:31+09:00"><meta property="og:site_name" content="Halog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://haservi.github.io/cover.jpeg"><meta name=twitter:title content="Spring 프로젝트 구조 및 공통 코드 처리 방법"><meta name=twitter:description content="스프링 프로젝트 중 공통적인 처리에 대한 방법 및 코드 개선에 대한 내용에 대한 정리입니다.
알림
해당 글은 Spring으로 사내 프로젝트를 하면서 느낀 코드 개선 및 경험에 대한 내용입니다.
여러 개발 블로그의 경험과 노하우가 담긴 글을 참조하며, 추가한 내용입니다.
글의 내용이 정답이 아닐 수 있으며, 개인적인 생각으로 가볍게 읽어주세요. :D..
프로젝트 코드 공통 처리 및 여러 Tips 참조링크 : Spring Guide - Directory 최근 프로젝트의 구조는 아래와 같습니다.
위와 같이 패키지를 domain과 global로 나누어 환경을 구축했습니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://haservi.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Spring 프로젝트 구조 및 공통 코드 처리 방법","item":"https://haservi.github.io/posts/spring/spring-project-structure-proecess/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Spring 프로젝트 구조 및 공통 코드 처리 방법","name":"Spring 프로젝트 구조 및 공통 코드 처리 방법","description":"스프링 프로젝트 중 공통적인 처리에 대한 방법 및 코드 개선에 대한 내용에 대한 정리입니다.\n알림\n해당 글은 Spring으로 사내 프로젝트를 하면서 느낀 코드 개선 및 경험에 대한 내용입니다.\n여러 개발 블로그의 경험과 노하우가 담긴 글을 참조하며, 추가한 내용입니다.\n글의 내용이 정답이 아닐 수 있으며, 개인적인 생각으로 가볍게 읽어주세요. :D..\n프로젝트 코드 공통 처리 및 여러 Tips 참조링크 : Spring Guide - Directory 최근 프로젝트의 구조는 아래와 같습니다.\n위와 같이 패키지를 domain과 global로 나누어 환경을 구축했습니다.","keywords":["",""],"articleBody":"스프링 프로젝트 중 공통적인 처리에 대한 방법 및 코드 개선에 대한 내용에 대한 정리입니다.\n알림\n해당 글은 Spring으로 사내 프로젝트를 하면서 느낀 코드 개선 및 경험에 대한 내용입니다.\n여러 개발 블로그의 경험과 노하우가 담긴 글을 참조하며, 추가한 내용입니다.\n글의 내용이 정답이 아닐 수 있으며, 개인적인 생각으로 가볍게 읽어주세요. :D..\n프로젝트 코드 공통 처리 및 여러 Tips 참조링크 : Spring Guide - Directory 최근 프로젝트의 구조는 아래와 같습니다.\n위와 같이 패키지를 domain과 global로 나누어 환경을 구축했습니다.\ndomain에서는 front의 화면과 유사하게 package를 설정했습니다.\n하지만 프로젝트의 시나리오가 자주 변경되고 각 시스템에서 공통적인 로직들이 많아지면서 중복 코드가 발생하게 되면서 구조를 조금 변경했습니다.\nbackend의 경우 시스템 저장소가 7개 정도가 되다보니 아무래도 중복 코드가 많이 발생했습니다.\n그래서 global은 모든 프로젝트(각각의 repository)를 동일하게 맞춘 후 multi module 또는 git submodule을 활용하여 관리하고 코드를 수정합니다.\n기존 global에 있는 시스템마다 조금 씩 다른 Spring Security 설정 Swaager 설정은 global에서 domain package로 이동 시켰습니다.\n또한, 하나의 Class 안에 시스템별 Inner Class가 있었던 부분이 있는데 코드를 유지관리하기가 힘들어서 전부 분리했습니다.\ndomain에서는 시스템 별 API 구조 포멧이 동일한 경우 front의 component개념과 동일하게 다른 backend 저장소에서도 해당 package를 복사하여도 import 경로 충돌이 없도록 구조를 맞추어 작업을 하게 되니 조금 더 공수가 줄어드는 효과가 있습니다.\nResponse Template에 대한 처리 참조링크: Response를 객체에 담아 반환하기 참조링크: Spring Guide - Exception 전략 Front에 제공하는 API의 통일성을 위하여 API 제공 시에 일관된 구조로 제공하기 위해 처음 의도는 정상적으로 API의 템플릿과 오류 및 유효성 처리에 대한 템플릿을 구분하여 처리합니다.\n정상 템플릿 1 2 3 \"success\": \"\", \"message\": \"\", \"data\": \"\" 에러 템플릿 1 2 3 4 \"success\": \"\", \"message\": \"\", \"error_code\": \"\", \"error_list\": \"\" 위와 같은 템플릿으로 backend에서는 정상인 경우 controller에서 return 해버리고 비정상적인 경우 @valid에서 죽거나, error를 throw합니다.\n이렇게 구현하면 아래와 같이 controller에서 바로 로직을 처리할 수 있습니다.\n1 2 3 4 @PostMapping public SingleResult\u003cTempManageResponse\u003e getTempList(@Valid @RequestBody TempRequest request) { return responseService.getSingleResult(tempManageService.getTempList(request), TEMP_SELECT_SUCCESS); } 에러의 경우 처리는 아래와 같습니다. 이후 ExceptionHandler로 빠진다음 여기서 error template 함수를 통해 에러 메시지를 반환합니다.\n1 2 Temp temp = tempRepository.findBySnoAndUseYn(request.getTempSno(), SEARCH_USE_YN) .orElseThrow(() -\u003e new EntityNotFoundException(TEMP_NOT_FOUND)) 이렇게 하면 에러에 대한 처리를 핸들링 할 수 있으니 필요에 의해 맞출 수 있습니다.\nentity에서 enum을 써야할 경우 참조링크: Legacy DB의 JPA Entity Mapping (Enum Converter 편) enum 처리는 약간 고민이 드는 점이 있지만 enum의 경우도 정말 잘 사용한다면 여러 상태를 직관적이고 쉽게 처리하고 화면과 상태를 한번에 처리할 수 있기에 장점이 있습니다.\n단점이라면 조금 학습을 해야하며, 종종 enum을 이용한 entity를 처리를 하면 다른 시스템에서 비슷한 시스템이지만 entity 정의가 달라서 코드 로직이 다른 경우입니다.\n예를 들어 아래의 entity가 있다고 하면,\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 @Convert(converter = AlarmConverter.class) @Comment(\"100:알림-일반, 200:알림-정상, 300:알림-경고, 400:알림-심각\") @Column(name = \"alarm_code\") private AlarmStatus alarm; ... @Getter public enum AlarmStatus implements EnumType { ALARM(100, \"알림\", 0), NORMAL(200, \"정상\", 0), WARNING(300, \"경고\", 1), FATAL(400, \"심각\", 2), ; private final int code; private final String level; private final int levelCode; ... } 1 2 3 @Comment(\"100:알림-일반, 200:알림-정상, 300:알림-경고, 400:알림-심각\") @Column(name = \"alarm_code\") private int alarm; 이렇게 다른 시스템에서 정의한 entity가 다른 경우 관련된 로직도 달라집니다.\n간단한 예로 해당 entity의 상태값을 조회할 때도 entity에 enum을 정의한 경우 아래와 같이\n1 2 3 4 5 6 7 8 9 10 @QueryProjection public NotificationsData(Long notiSno, NotificationsStatus status, String equip, LocalDateTime dateTime, String value, NotificationsConfirmStatus confirmationStatus) { this.notiSno = notiSno; this.level = status.getLevel(); this.equip = equip; this.dateTime = dateTime; this.value = value; this.confirmationStatus = confirmationStatus.getDesc(); } enum이 상태를 알기에 세부적으로 지정한 정보를 바로 가져올 수 있습니다.\nentity의 단일 타입으로 설정하면 enum에서 정의하지 못한 값을 상수로 정의 후 조건문으로 확인하는 로직이 필요합니다.\n하지만 이것도 정답이 있는 것이 아니라 프로젝트의 복잡도와 어떻게 하는게 더 쉽고 효율적인지에 따라 상황에 맞게 팀내에서 잘 조율해서 해야 된다고 생각합니다.\nDto 및 Optional은 잘 사용하기 관령링크: Optional에 대해 backend의 controller의 역할은 frontend에서 들어온 값의 유효성 처리와 service 로직에 필요한 값을 제공하거나, 반대로 frontend에 데이터를 제공하는 경우라 생각합니다.\n여러 블로그를 보면 dto는 controller와 service까지만 관여하는게 좋다고도 하는데 QueryDSL을 이용하므로 dto는 repository 까지 들어가는 경우도 종종 있을 수 있다고 생각합니다.\n이러한 부분은 유연하게 가면 될 것이라 생각됩니다.\n관리할 수 없는 코드는 삭제 처음 Backend를 구성할 때는 swagger2를 적용하고 front 외주 개발자 분과 API에 대한 기능을 명세했었습니다.\nswagger2에서는 실시간으로 backend api를 확인할 수 있지만, 그 때에 이슈 및 요청사항 관리를 어떻게 할지 고민중에\n어떤 API가 변경됐는지를 swagger안에 html을 만들어서 명세 했던적이 있습니다.\n1 2 3 4 5 6 7 8 9 10 private ApiInfo apiInfo() { return new ApiInfoBuilder() .title(\"title\") .version(\"1.01\") .description(\"설명\") .license(\"변경이력 \") .licenseUrl(\"/version-history.html\") .build(); } 위와 같이 설정 후 static에 github style을 적용 후 html에 변경 이력을 관리했습니다.\n문제는 회의 후 수정사항이 증가하면 위의 변경이력 또한 갱신해줘야 하는데 일을 하기 위해 일을 만드는 거라 느껴졌습니다.\n지금은 Gitlab에서 CI/CD와 각 시스템마다 Issue를 처리하고 있지만, 이슈에 대해 이슈 트래킹 도구(Jira or Trello or Gitlab or Notion 등)를 미리 이용했다면 더 좋았을 거라 생각됩니다.\n클래스 역할 코드는 각 클래스의 역할에 맞게 코드를 분리하면 좋다고 생각합니다.\n예를 들어, 회원가입을 하는 경우 controller에서는 입력값에 대한 유효성 처리, service에서는 db와 연계된 예외사항 및 로직 처리, repository는 실제 저장할 쿼리 정도로 기준을 잡아서 처리합니다.\nDto에서 유효성을 처리하는 방법은 아래와 같으며, 컨트롤러에서는 아래와 같이 처리하면 좋습니다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 Controller public CommonResult updateUser(@Valid @RequestBody UserUpdateRequest request) { userManageService.updateUser(request); return responseService.getSuccessResult(CommonMessage.USER_UPDATE_SUCCESS); } Request Dto @Getter @NoArgsConstructor(access = AccessLevel.PRIVATE) @ApiModel(value = \"사용자 수정 요청 정보\") public class UserUpdateRequest { @NotBlank(message = \"이름을 입력하세요.\") private String name; @Email(message = \"유효한 이메일 주소를 입력하세요.\") private String email; } 위와 같이 지정하면 위에서 지정한 Global Exception으로 해당 valid가 빠지면서 에러 템플릿에서 지정한 포맷으로 에러 사유를 볼 수 있습니다.\n이 밖에도 필요에 따라 페이징 처리, 다국어 처리, DB 이중화 등도 잘 설정해 놓으면 쉽게 이용하여 쓸 수 있을 것이라 생각합니다.\n","wordCount":"932","inLanguage":"ko","datePublished":"2023-10-14T20:45:31+09:00","dateModified":"2023-10-14T20:45:31+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://haservi.github.io/posts/spring/spring-project-structure-proecess/"},"publisher":{"@type":"Organization","name":"Halog","logo":{"@type":"ImageObject","url":"https://haservi.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://haservi.github.io/ accesskey=h title="Halog (Alt + H)">Halog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://haservi.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://haservi.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://haservi.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://haservi.github.io/>홈</a>&nbsp;»&nbsp;<a href=https://haservi.github.io/posts/>Posts</a></div><h1 class=post-title>Spring 프로젝트 구조 및 공통 코드 처리 방법</h1><div class=post-meta><span title='2023-10-14 20:45:31 +0900 +0900'>10월 14, 2023</span>&nbsp;·&nbsp;5 분</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>목차</span></summary><div class=inner><ul><li><a href=#%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8-%ec%bd%94%eb%93%9c-%ea%b3%b5%ed%86%b5-%ec%b2%98%eb%a6%ac-%eb%b0%8f-%ec%97%ac%eb%9f%ac-tips aria-label="프로젝트 코드 공통 처리 및 여러 Tips">프로젝트 코드 공통 처리 및 여러 Tips</a><ul><li><a href=#response-template%ec%97%90-%eb%8c%80%ed%95%9c-%ec%b2%98%eb%a6%ac aria-label="Response Template에 대한 처리">Response Template에 대한 처리</a></li><li><a href=#entity%ec%97%90%ec%84%9c-enum%ec%9d%84-%ec%8d%a8%ec%95%bc%ed%95%a0-%ea%b2%bd%ec%9a%b0 aria-label="entity에서 enum을 써야할 경우">entity에서 enum을 써야할 경우</a></li><li><a href=#dto-%eb%b0%8f-optional%ec%9d%80-%ec%9e%98-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0 aria-label="Dto 및 Optional은 잘 사용하기">Dto 및 Optional은 잘 사용하기</a></li><li><a href=#%ea%b4%80%eb%a6%ac%ed%95%a0-%ec%88%98-%ec%97%86%eb%8a%94-%ec%bd%94%eb%93%9c%eb%8a%94-%ec%82%ad%ec%a0%9c aria-label="관리할 수 없는 코드는 삭제">관리할 수 없는 코드는 삭제</a></li><li><a href=#%ed%81%b4%eb%9e%98%ec%8a%a4-%ec%97%ad%ed%95%a0 aria-label="클래스 역할">클래스 역할</a></li></ul></li></ul></div></details></div><div class=post-content><p>스프링 프로젝트 중 공통적인 처리에 대한 방법 및 코드 개선에 대한 내용에 대한 정리입니다.</p><style type=text/css>.notice{--root-color:#000;--root-background:#e7f2fa;--title-color:#fff;--title-background:#6ab0de;--warning-title:rgba(217, 83, 79, 0.9);--warning-content:#fae2e2;--info-title:#f0b37e;--info-content:#fff2db;--note-title:#6ab0de;--note-content:#e7f2fa;--tip-title:rgba(92, 184, 92, 0.8);--tip-content:#e6f9e6}body.dark .notice{--root-color:#fff;--root-background:#e7f2fa;--title-color:#fff;--title-background:#6ab0de;--warning-title:rgba(130, 49, 47, 0.9);--warning-content:#341312;--info-title:#906B4B;--info-content:#392A1E;--note-title:#3f6985;--note-content:#192A35;--tip-title:rgba(46, 92, 46, 0.8);--tip-content:#122412}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style><div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379.0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628.0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628.0l-22.627 22.627c-6.248 6.248-6.248 16.379.0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937.0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154.0l239.94 416.028zM288 354c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196.0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627.0 12 5.373 12 12v1e2h12c6.627.0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info"><p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"/></svg></span>알림</p><p>해당 글은 Spring으로 사내 프로젝트를 하면서 느낀 코드 개선 및 경험에 대한 내용입니다.<br>여러 개발 블로그의 경험과 노하우가 담긴 글을 참조하며, 추가한 내용입니다.<br>글의 내용이 정답이 아닐 수 있으며, 개인적인 생각으로 가볍게 읽어주세요. :D..</p></div><h2 id=프로젝트-코드-공통-처리-및-여러-tips>프로젝트 코드 공통 처리 및 여러 Tips<a hidden class=anchor aria-hidden=true href=#프로젝트-코드-공통-처리-및-여러-tips>#</a></h2><p>참조링크 : <a href=https://cheese10yun.github.io/spring-guide-directory/ target=_blank>Spring Guide - Directory</a></p><p>최근 프로젝트의 구조는 아래와 같습니다.</p><p><img loading=lazy src=./images/image02.png#center alt="Alt text"></p><p>위와 같이 패키지를 domain과 global로 나누어 환경을 구축했습니다.</p><p>domain에서는 front의 화면과 유사하게 package를 설정했습니다.<br>하지만 프로젝트의 시나리오가 자주 변경되고 각 시스템에서 공통적인 로직들이 많아지면서 중복 코드가 발생하게 되면서 구조를 조금 변경했습니다.</p><p>backend의 경우 시스템 저장소가 7개 정도가 되다보니 아무래도 중복 코드가 많이 발생했습니다.</p><p>그래서 global은 모든 프로젝트(각각의 repository)를 동일하게 맞춘 후 multi module 또는 git submodule을 활용하여 관리하고 코드를 수정합니다.</p><p>기존 global에 있는 시스템마다 조금 씩 다른 Spring Security 설정 Swaager 설정은 global에서 domain package로 이동 시켰습니다.</p><p>또한, 하나의 Class 안에 시스템별 Inner Class가 있었던 부분이 있는데 코드를 유지관리하기가 힘들어서 전부 분리했습니다.</p><p>domain에서는 시스템 별 API 구조 포멧이 동일한 경우 front의 component개념과 동일하게 다른 backend 저장소에서도 해당 package를 복사하여도
import 경로 충돌이 없도록 구조를 맞추어 작업을 하게 되니 조금 더 공수가 줄어드는 효과가 있습니다.</p><h3 id=response-template에-대한-처리>Response Template에 대한 처리<a hidden class=anchor aria-hidden=true href=#response-template에-대한-처리>#</a></h3><p>참조링크: <a href=https://velog.io/@minji/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-Response-%EA%B0%90%EC%8B%B8%EC%84%9C-%EB%B0%98%ED%99%98%ED%95%98%EA%B8%B0 target=_blank>Response를 객체에 담아 반환하기</a><br>참조링크: <a href=https://cheese10yun.github.io/spring-guide-exception/ target=_blank>Spring Guide - Exception 전략</a></p><p>Front에 제공하는 API의 통일성을 위하여 API 제공 시에 일관된 구조로 제공하기 위해 처음 의도는 정상적으로 API의 템플릿과
오류 및 유효성 처리에 대한 템플릿을 구분하여 처리합니다.</p><ul><li>정상 템플릿</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;success&#34;</span><span class=err>:</span> <span class=s2>&#34;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;message&#34;</span><span class=err>:</span> <span class=s2>&#34;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;data&#34;</span><span class=err>:</span> <span class=s2>&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>에러 템플릿</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;success&#34;</span><span class=err>:</span> <span class=s2>&#34;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;message&#34;</span><span class=err>:</span> <span class=s2>&#34;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;error_code&#34;</span><span class=err>:</span> <span class=s2>&#34;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;error_list&#34;</span><span class=err>:</span> <span class=s2>&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>위와 같은 템플릿으로 backend에서는 정상인 경우 controller에서 return 해버리고 비정상적인 경우 @valid에서 죽거나, error를 throw합니다.</p><p>이렇게 구현하면 아래와 같이 controller에서 바로 로직을 처리할 수 있습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@PostMapping</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=n>SingleResult</span><span class=o>&lt;</span><span class=n>TempManageResponse</span><span class=o>&gt;</span> <span class=nf>getTempList</span><span class=o>(</span><span class=nd>@Valid</span> <span class=nd>@RequestBody</span> <span class=n>TempRequest</span> <span class=n>request</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>responseService</span><span class=o>.</span><span class=na>getSingleResult</span><span class=o>(</span><span class=n>tempManageService</span><span class=o>.</span><span class=na>getTempList</span><span class=o>(</span><span class=n>request</span><span class=o>),</span> <span class=n>TEMP_SELECT_SUCCESS</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>에러의 경우 처리는 아래와 같습니다. 이후 ExceptionHandler로 빠진다음 여기서 error template 함수를 통해 에러 메시지를 반환합니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Temp</span> <span class=n>temp</span> <span class=o>=</span> <span class=n>tempRepository</span><span class=o>.</span><span class=na>findBySnoAndUseYn</span><span class=o>(</span><span class=n>request</span><span class=o>.</span><span class=na>getTempSno</span><span class=o>(),</span> <span class=n>SEARCH_USE_YN</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>orElseThrow</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=n>EntityNotFoundException</span><span class=o>(</span><span class=n>TEMP_NOT_FOUND</span><span class=o>))</span>
</span></span></code></pre></td></tr></table></div></div><p>이렇게 하면 에러에 대한 처리를 핸들링 할 수 있으니 필요에 의해 맞출 수 있습니다.</p><h3 id=entity에서-enum을-써야할-경우>entity에서 enum을 써야할 경우<a hidden class=anchor aria-hidden=true href=#entity에서-enum을-써야할-경우>#</a></h3><p>참조링크: <a href=https://techblog.woowahan.com/2600/ target=_blank>Legacy DB의 JPA Entity Mapping (Enum Converter 편)</a></p><p>enum 처리는 약간 고민이 드는 점이 있지만 enum의 경우도 정말 잘 사용한다면 여러 상태를 직관적이고 쉽게 처리하고 화면과 상태를
한번에 처리할 수 있기에 장점이 있습니다.</p><p>단점이라면 조금 학습을 해야하며, 종종 enum을 이용한 entity를 처리를 하면 다른 시스템에서 비슷한 시스템이지만 entity 정의가 달라서
코드 로직이 다른 경우입니다.</p><p>예를 들어 아래의 entity가 있다고 하면,</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Convert</span><span class=o>(</span><span class=n>converter</span> <span class=o>=</span> <span class=n>AlarmConverter</span><span class=o>.</span><span class=na>class</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Comment</span><span class=o>(</span><span class=s>&#34;100:알림-일반, 200:알림-정상, 300:알림-경고, 400:알림-심각&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Column</span><span class=o>(</span><span class=n>name</span> <span class=o>=</span> <span class=s>&#34;alarm_code&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=n>AlarmStatus</span> <span class=n>alarm</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Getter</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>enum</span> <span class=n>AlarmStatus</span> <span class=kd>implements</span> <span class=n>EnumType</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ALARM</span><span class=o>(</span><span class=mi>100</span><span class=o>,</span> <span class=s>&#34;알림&#34;</span><span class=o>,</span> <span class=mi>0</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>NORMAL</span><span class=o>(</span><span class=mi>200</span><span class=o>,</span> <span class=s>&#34;정상&#34;</span><span class=o>,</span> <span class=mi>0</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>WARNING</span><span class=o>(</span><span class=mi>300</span><span class=o>,</span> <span class=s>&#34;경고&#34;</span><span class=o>,</span> <span class=mi>1</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>FATAL</span><span class=o>(</span><span class=mi>400</span><span class=o>,</span> <span class=s>&#34;심각&#34;</span><span class=o>,</span> <span class=mi>2</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>code</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>level</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>levelCode</span><span class=o>;</span> 
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Comment</span><span class=o>(</span><span class=s>&#34;100:알림-일반, 200:알림-정상, 300:알림-경고, 400:알림-심각&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Column</span><span class=o>(</span><span class=n>name</span> <span class=o>=</span> <span class=s>&#34;alarm_code&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=kt>int</span> <span class=n>alarm</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><p>이렇게 다른 시스템에서 정의한 entity가 다른 경우 관련된 로직도 달라집니다.</p><p>간단한 예로 해당 entity의 상태값을 조회할 때도 entity에 enum을 정의한 경우 아래와 같이</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@QueryProjection</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=nf>NotificationsData</span><span class=o>(</span><span class=n>Long</span> <span class=n>notiSno</span><span class=o>,</span> <span class=n>NotificationsStatus</span> <span class=n>status</span><span class=o>,</span> <span class=n>String</span> <span class=n>equip</span><span class=o>,</span> <span class=n>LocalDateTime</span> <span class=n>dateTime</span><span class=o>,</span> <span class=n>String</span> <span class=n>value</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                            <span class=n>NotificationsConfirmStatus</span> <span class=n>confirmationStatus</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>notiSno</span> <span class=o>=</span> <span class=n>notiSno</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>level</span> <span class=o>=</span> <span class=n>status</span><span class=o>.</span><span class=na>getLevel</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>equip</span> <span class=o>=</span> <span class=n>equip</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>dateTime</span> <span class=o>=</span> <span class=n>dateTime</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>.</span><span class=na>confirmationStatus</span> <span class=o>=</span> <span class=n>confirmationStatus</span><span class=o>.</span><span class=na>getDesc</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>enum이 상태를 알기에 세부적으로 지정한 정보를 바로 가져올 수 있습니다.</p><p>entity의 단일 타입으로 설정하면 enum에서 정의하지 못한 값을 상수로 정의 후 조건문으로 확인하는 로직이 필요합니다.</p><p>하지만 이것도 정답이 있는 것이 아니라 프로젝트의 복잡도와 어떻게 하는게 더 쉽고 효율적인지에 따라 상황에 맞게
팀내에서 잘 조율해서 해야 된다고 생각합니다.</p><h3 id=dto-및-optional은-잘-사용하기>Dto 및 Optional은 잘 사용하기<a hidden class=anchor aria-hidden=true href=#dto-및-optional은-잘-사용하기>#</a></h3><p>관령링크: <a href=https://www.daleseo.com/java8-optional-before/ target=_blank>Optional에 대해</a></p><p>backend의 controller의 역할은 frontend에서 들어온 값의 유효성 처리와 service 로직에 필요한 값을 제공하거나,
반대로 frontend에 데이터를 제공하는 경우라 생각합니다.</p><p>여러 블로그를 보면 dto는 controller와 service까지만 관여하는게 좋다고도 하는데 QueryDSL을 이용하므로 dto는 repository 까지 들어가는
경우도 종종 있을 수 있다고 생각합니다.</p><p>이러한 부분은 유연하게 가면 될 것이라 생각됩니다.</p><h3 id=관리할-수-없는-코드는-삭제>관리할 수 없는 코드는 삭제<a hidden class=anchor aria-hidden=true href=#관리할-수-없는-코드는-삭제>#</a></h3><p>처음 Backend를 구성할 때는 swagger2를 적용하고 front 외주 개발자 분과 API에 대한 기능을 명세했었습니다.</p><p>swagger2에서는 실시간으로 backend api를 확인할 수 있지만, 그 때에 이슈 및 요청사항 관리를 어떻게 할지 고민중에<br>어떤 API가 변경됐는지를 swagger안에 html을 만들어서 명세 했던적이 있습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=n>ApiInfo</span> <span class=nf>apiInfo</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=n>ApiInfoBuilder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>title</span><span class=o>(</span><span class=s>&#34;title&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>version</span><span class=o>(</span><span class=s>&#34;1.01&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>description</span><span class=o>(</span><span class=s>&#34;설명&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>license</span><span class=o>(</span><span class=s>&#34;변경이력 &#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>licenseUrl</span><span class=o>(</span><span class=s>&#34;/version-history.html&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>위와 같이 설정 후 static에 github style을 적용 후 html에 변경 이력을 관리했습니다.</p><p>문제는 회의 후 수정사항이 증가하면 위의 변경이력 또한 갱신해줘야 하는데 일을 하기 위해 일을 만드는 거라 느껴졌습니다.</p><p>지금은 Gitlab에서 CI/CD와 각 시스템마다 Issue를 처리하고 있지만, 이슈에 대해 이슈 트래킹 도구(Jira or Trello or Gitlab or Notion 등)를 미리 이용했다면 더 좋았을 거라 생각됩니다.</p><h3 id=클래스-역할>클래스 역할<a hidden class=anchor aria-hidden=true href=#클래스-역할>#</a></h3><p>코드는 각 클래스의 역할에 맞게 코드를 분리하면 좋다고 생각합니다.</p><p>예를 들어, 회원가입을 하는 경우 controller에서는 입력값에 대한 유효성 처리, service에서는 db와 연계된 예외사항 및 로직 처리, repository는 실제 저장할 쿼리 정도로 기준을 잡아서 처리합니다.</p><p>Dto에서 유효성을 처리하는 방법은 아래와 같으며, 컨트롤러에서는 아래와 같이 처리하면 좋습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Controller</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=n>CommonResult</span> <span class=nf>updateUser</span><span class=o>(</span><span class=nd>@Valid</span> <span class=nd>@RequestBody</span> <span class=n>UserUpdateRequest</span> <span class=n>request</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>userManageService</span><span class=o>.</span><span class=na>updateUser</span><span class=o>(</span><span class=n>request</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>responseService</span><span class=o>.</span><span class=na>getSuccessResult</span><span class=o>(</span><span class=n>CommonMessage</span><span class=o>.</span><span class=na>USER_UPDATE_SUCCESS</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Request</span> <span class=n>Dto</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Getter</span>
</span></span><span class=line><span class=cl><span class=nd>@NoArgsConstructor</span><span class=o>(</span><span class=n>access</span> <span class=o>=</span> <span class=n>AccessLevel</span><span class=o>.</span><span class=na>PRIVATE</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@ApiModel</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;사용자 수정 요청 정보&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserUpdateRequest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@NotBlank</span><span class=o>(</span><span class=n>message</span> <span class=o>=</span> <span class=s>&#34;이름을 입력하세요.&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Email</span><span class=o>(</span><span class=n>message</span> <span class=o>=</span> <span class=s>&#34;유효한 이메일 주소를 입력하세요.&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>email</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>위와 같이 지정하면 위에서 지정한 Global Exception으로 해당 valid가 빠지면서 에러 템플릿에서 지정한 포맷으로 에러 사유를 볼 수 있습니다.</p><p>이 밖에도 필요에 따라 페이징 처리, 다국어 처리, DB 이중화 등도 잘 설정해 놓으면 쉽게 이용하여 쓸 수 있을 것이라 생각합니다.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://haservi.github.io/posts/tips/wireshark-dtls-handshake/><span class=title>« 이전 페이지</span><br><span>와이어 샤크를 이용해 DTLS1.2 handshake 확인하기</span></a>
<a class=next href=https://haservi.github.io/posts/spring/p6-spy-query-log/><span class=title>다음 페이지 »</span><br><span>P6Spy를 이용하여 로그 출력하기</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Spring 프로젝트 구조 및 공통 코드 처리 방법 on x" href="https://x.com/intent/tweet/?text=Spring%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ea%b5%ac%ec%a1%b0%20%eb%b0%8f%20%ea%b3%b5%ed%86%b5%20%ec%bd%94%eb%93%9c%20%ec%b2%98%eb%a6%ac%20%eb%b0%a9%eb%b2%95&url=https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f&hashtags=%2c"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Spring 프로젝트 구조 및 공통 코드 처리 방법 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f&title=Spring%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ea%b5%ac%ec%a1%b0%20%eb%b0%8f%20%ea%b3%b5%ed%86%b5%20%ec%bd%94%eb%93%9c%20%ec%b2%98%eb%a6%ac%20%eb%b0%a9%eb%b2%95&summary=Spring%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ea%b5%ac%ec%a1%b0%20%eb%b0%8f%20%ea%b3%b5%ed%86%b5%20%ec%bd%94%eb%93%9c%20%ec%b2%98%eb%a6%ac%20%eb%b0%a9%eb%b2%95&source=https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Spring 프로젝트 구조 및 공통 코드 처리 방법 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f&title=Spring%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ea%b5%ac%ec%a1%b0%20%eb%b0%8f%20%ea%b3%b5%ed%86%b5%20%ec%bd%94%eb%93%9c%20%ec%b2%98%eb%a6%ac%20%eb%b0%a9%eb%b2%95"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Spring 프로젝트 구조 및 공통 코드 처리 방법 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Spring 프로젝트 구조 및 공통 코드 처리 방법 on whatsapp" href="https://api.whatsapp.com/send?text=Spring%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ea%b5%ac%ec%a1%b0%20%eb%b0%8f%20%ea%b3%b5%ed%86%b5%20%ec%bd%94%eb%93%9c%20%ec%b2%98%eb%a6%ac%20%eb%b0%a9%eb%b2%95%20-%20https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Spring 프로젝트 구조 및 공통 코드 처리 방법 on telegram" href="https://telegram.me/share/url?text=Spring%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ea%b5%ac%ec%a1%b0%20%eb%b0%8f%20%ea%b3%b5%ed%86%b5%20%ec%bd%94%eb%93%9c%20%ec%b2%98%eb%a6%ac%20%eb%b0%a9%eb%b2%95&url=https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Spring 프로젝트 구조 및 공통 코드 처리 방법 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Spring%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ea%b5%ac%ec%a1%b0%20%eb%b0%8f%20%ea%b3%b5%ed%86%b5%20%ec%bd%94%eb%93%9c%20%ec%b2%98%eb%a6%ac%20%eb%b0%a9%eb%b2%95&u=https%3a%2f%2fhaservi.github.io%2fposts%2fspring%2fspring-project-structure-proecess%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div></footer><section class=comments><script>loadComment();function loadComment(){document.body.className.includes("dark")?theme="photon-dark":theme="boxy-light";let e=document.createElement("script");e.src="https://utteranc.es/client.js",e.setAttribute("repo","haservi/haservi.github.io"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme",theme),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",""),document.querySelector("section.comments").innerHTML="",document.querySelector("section.comments").appendChild(e)}</script></section></article></main><footer class=footer><span>&copy; 2025 <a href=https://haservi.github.io/>Halog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{margin:0,background:"#1d1e20",scrollOffset:40,container:null,template:null})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark")),loadComment()})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="복사";function s(){t.innerHTML="복사 완료!",setTimeout(()=>{t.innerHTML="복사"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>