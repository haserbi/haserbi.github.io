<!doctype html><html lang=ko dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Java Priority Queue(우선순위 큐) 원리 및 사용 방법 | Halog</title>
<meta name=keywords content=",">
<meta name=description content="우선순위 큐(Priority Queue) 란? 우선순위 큐(Priority Queue)는 일반적인 큐의 구조와 달리 들어가는 순서와 상관없이 정의한대로 우선순위를 먼저 결정하고 그 우선순위가 높은 데이터가 먼저 나가는 자료구조 입니다. 그렇기 때문에 dequeue를 하면 이미 정의한 순서에 맞게 가장 위의 값이 나타납니다.
우선순위 큐는 힙을 기반으로 하는 완전이진트리로 우선순위를 정하게 됩니다.
사용 방법 우선순위 큐는 우선순위가 꼭 필요한 경우에 사용합니다. 람다식으로 정의해도 되고 Comparable을 이용해서 정의해도 됩니다.
// 낮은 숫자가 우선순위가 높은 방식 PriorityQueue<Integer> pq = new PriorityQueue<>(); // 높은 숫자가 우선순위가 높은 방식 PriorityQueue<Integer> pq = new PriorityQueue<>(Collections.">
<meta name=author content="Haseop">
<link rel=canonical href=https://haservi.github.io/posts/java/priority-queue/>
<link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://haservi.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://haservi.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://haservi.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://haservi.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://haservi.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RP5NDCM8J9"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-RP5NDCM8J9',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Java Priority Queue(우선순위 큐) 원리 및 사용 방법">
<meta property="og:description" content="우선순위 큐(Priority Queue) 란? 우선순위 큐(Priority Queue)는 일반적인 큐의 구조와 달리 들어가는 순서와 상관없이 정의한대로 우선순위를 먼저 결정하고 그 우선순위가 높은 데이터가 먼저 나가는 자료구조 입니다. 그렇기 때문에 dequeue를 하면 이미 정의한 순서에 맞게 가장 위의 값이 나타납니다.
우선순위 큐는 힙을 기반으로 하는 완전이진트리로 우선순위를 정하게 됩니다.
사용 방법 우선순위 큐는 우선순위가 꼭 필요한 경우에 사용합니다. 람다식으로 정의해도 되고 Comparable을 이용해서 정의해도 됩니다.
// 낮은 숫자가 우선순위가 높은 방식 PriorityQueue<Integer> pq = new PriorityQueue<>(); // 높은 숫자가 우선순위가 높은 방식 PriorityQueue<Integer> pq = new PriorityQueue<>(Collections.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://haservi.github.io/posts/java/priority-queue/">
<meta property="og:image" content="https://haservi.github.io/%3Cimage%20path/url%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-02-14T20:20:41+09:00">
<meta property="article:modified_time" content="2022-02-14T20:20:41+09:00"><meta property="og:site_name" content="Halog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://haservi.github.io/%3Cimage%20path/url%3E">
<meta name=twitter:title content="Java Priority Queue(우선순위 큐) 원리 및 사용 방법">
<meta name=twitter:description content="우선순위 큐(Priority Queue) 란? 우선순위 큐(Priority Queue)는 일반적인 큐의 구조와 달리 들어가는 순서와 상관없이 정의한대로 우선순위를 먼저 결정하고 그 우선순위가 높은 데이터가 먼저 나가는 자료구조 입니다. 그렇기 때문에 dequeue를 하면 이미 정의한 순서에 맞게 가장 위의 값이 나타납니다.
우선순위 큐는 힙을 기반으로 하는 완전이진트리로 우선순위를 정하게 됩니다.
사용 방법 우선순위 큐는 우선순위가 꼭 필요한 경우에 사용합니다. 람다식으로 정의해도 되고 Comparable을 이용해서 정의해도 됩니다.
// 낮은 숫자가 우선순위가 높은 방식 PriorityQueue<Integer> pq = new PriorityQueue<>(); // 높은 숫자가 우선순위가 높은 방식 PriorityQueue<Integer> pq = new PriorityQueue<>(Collections.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://haservi.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Java Priority Queue(우선순위 큐) 원리 및 사용 방법","item":"https://haservi.github.io/posts/java/priority-queue/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java Priority Queue(우선순위 큐) 원리 및 사용 방법","name":"Java Priority Queue(우선순위 큐) 원리 및 사용 방법","description":"우선순위 큐(Priority Queue) 란? 우선순위 큐(Priority Queue)는 일반적인 큐의 구조와 달리 들어가는 순서와 상관없이 정의한대로 우선순위를 먼저 결정하고 그 우선순위가 높은 데이터가 먼저 나가는 자료구조 입니다. 그렇기 때문에 dequeue를 하면 이미 정의한 순서에 맞게 가장 위의 값이 나타납니다.\n우선순위 큐는 힙을 기반으로 하는 완전이진트리로 우선순위를 정하게 됩니다.\n사용 방법 우선순위 큐는 우선순위가 꼭 필요한 경우에 사용합니다. 람다식으로 정의해도 되고 Comparable을 이용해서 정의해도 됩니다.\n// 낮은 숫자가 우선순위가 높은 방식 PriorityQueue\u0026lt;Integer\u0026gt; pq = new PriorityQueue\u0026lt;\u0026gt;(); // 높은 숫자가 우선순위가 높은 방식 PriorityQueue\u0026lt;Integer\u0026gt; pq = new PriorityQueue\u0026lt;\u0026gt;(Collections.","keywords":["",""],"articleBody":"우선순위 큐(Priority Queue) 란? 우선순위 큐(Priority Queue)는 일반적인 큐의 구조와 달리 들어가는 순서와 상관없이 정의한대로 우선순위를 먼저 결정하고 그 우선순위가 높은 데이터가 먼저 나가는 자료구조 입니다. 그렇기 때문에 dequeue를 하면 이미 정의한 순서에 맞게 가장 위의 값이 나타납니다.\n우선순위 큐는 힙을 기반으로 하는 완전이진트리로 우선순위를 정하게 됩니다.\n사용 방법 우선순위 큐는 우선순위가 꼭 필요한 경우에 사용합니다. 람다식으로 정의해도 되고 Comparable을 이용해서 정의해도 됩니다.\n// 낮은 숫자가 우선순위가 높은 방식 PriorityQueueInteger pq = new PriorityQueue(); // 높은 숫자가 우선순위가 높은 방식 PriorityQueueInteger pq = new PriorityQueue(Collections.reverseOrder()); // 이중 배열에서 0번째 낮은 숫자가 우선순위가 높은 방식(람다식) PriorityQueueint[] pq = new PriorityQueue((o1, o2) - o1[0] - o2[0]); // 이중 배열에서 0번째 낮은 숫자가 우선순위가 높은 방식(Comparator) PriorityQueueint[] pq = new PriorityQueue(new Comparatorint[]() { @Override public int compare(int[] o1, int[] o2) { return o1[0] - o2[0]; }; }); 위 처럼 다양한 방법으로 우선순위를 정할 수 있습니다.\n간단한 예제 및 원리 간단히 예를 들어 가장 작은 수를 기준으로 우선순위 큐를 만들면\nPriorityQueueInteger pq = new PriorityQueue(); pq.offer(1); pq.offer(2); pq.offer(3); pq.offer(4); pq.offer(5); pq.offer(6); pq.offer(7); 의 형태로 만들어집니다.\n그렇지만 각각 enqueue할 때는 이진트리의 마지막부분에서 조건에 맞게 값이 들어가는거죠.\n위의 경우는 가장작은 수부터 차례로 들어가기 때문에 swap을 하지 않고 값이 들어가게됩니다.\n그렇지만 만약 큰 수부터 우선순위 큐를 하게 되면\nPriorityQueueInteger pq = new PriorityQueue(Collections.reverseOrder()); pq.offer(1); pq.offer(2); pq.offer(3); pq.offer(4); pq.offer(5); pq.offer(6); pq.offer(7); 의 형태로 만들어집니다. 위의 순서를 그림으로 그리면 아래와 같은 순서로 완전 이진트리 형태로 값이 들어갑니다.\n조건에 맞게 우선 가장 마지막 노드에 값이 들어가고 부모와 비교를 해서 자신의 위치를 찾아가는 것이죠.\n반대로 dequeue인 poll()의 경우는 우선 Root를 제거하고 가장 마지막의 노드를 Root로 가져온 뒤 자식노드 중 자신보다 우선순위가 높은 값이 있다면 Swap을 하여 자신의 위치를 찾아가는 식입니다.\nwhile (!pq.isEmpty()) { pq.poll(); } 실제로 코드 내부로 들어가면 enqueue의 경우는 아래와 같이 Comparable로 정의하고 부모 노드와 현재 노드를 변경하는 코드가 들어가 있습니다.\npublic boolean offer(E e) { if (e == null) throw new NullPointerException(); modCount++; int i = size; if (i = queue.length) grow(i + 1); siftUp(i, e); size = i + 1; return true; } private void siftUp(int k, E x) { if (comparator != null) siftUpUsingComparator(k, x, queue, comparator); else siftUpComparable(k, x, queue); } private static T void siftUpComparable(int k, T x, Object[] es) { Comparable super T key = (Comparable super T) x; while (k  0) { int parent = (k - 1)  1; Object e = es[parent]; if (key.compareTo((T) e) = 0) break; es[k] = e; k = parent; } es[k] = key; } private static T void siftUpUsingComparator( int k, T x, Object[] es, Comparator super T cmp) { while (k  0) { int parent = (k - 1)  1; Object e = es[parent]; if (cmp.compare(x, (T) e) = 0) break; es[k] = e; k = parent; } es[k] = x; } 마찬가지로 dequeue의 경우도 Comparable로 정의하고 child 노드와 현재 노드를 변경하는 식의 코드가 들어있습니다.\npublic E poll() { final Object[] es; final E result; if ((result = (E) ((es = queue)[0])) != null) { modCount++; final int n; final E x = (E) es[(n = --size)]; es[n] = null; if (n  0) { final Comparator super E cmp; if ((cmp = comparator) == null) siftDownComparable(0, x, es, n); else siftDownUsingComparator(0, x, es, n, cmp); } } return result; } private static T void siftDownComparable(int k, T x, Object[] es, int n) { // assert n  0;  Comparable super T key = (Comparable super T)x; int half = n  1; // loop while a non-leaf  while (k  half) { int child = (k  1) + 1; // assume left child is least  Object c = es[child]; int right = child + 1; if (right  n \u0026\u0026 ((Comparable super T) c).compareTo((T) es[right])  0) c = es[child = right]; if (key.compareTo((T) c)  0) break; es[k] = c; k = child; } es[k] = key; } private static T void siftDownUsingComparator( int k, T x, Object[] es, int n, Comparator super T cmp) { // assert n  0;  int half = n  1; while (k  half) { int child = (k  1) + 1; Object c = es[child]; int right = child + 1; if (right  n \u0026\u0026 cmp.compare((T) c, (T) es[right])  0) c = es[child = right]; if (cmp.compare(x, (T) c)  0) break; es[k] = c; k = child; } es[k] = x; } ","wordCount":"716","inLanguage":"ko","image":"https://haservi.github.io/%3Cimage%20path/url%3E","datePublished":"2022-02-14T20:20:41+09:00","dateModified":"2022-02-14T20:20:41+09:00","author":{"@type":"Person","name":"Haseop"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://haservi.github.io/posts/java/priority-queue/"},"publisher":{"@type":"Organization","name":"Halog","logo":{"@type":"ImageObject","url":"https://haservi.github.io/favicon.ico"}}}</script>
</head>
<body class=dark id=top>
<script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://haservi.github.io/ accesskey=h title="Halog (Alt + H)">Halog</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
<li>
<a href=https://haservi.github.io/archives/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://haservi.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://haservi.github.io/projects/ title=Projects>
<span>Projects</span>
</a>
</li>
<li>
<a href=https://haservi.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://haservi.github.io/>홈</a>&nbsp;»&nbsp;<a href=https://haservi.github.io/posts/>Posts</a></div>
<h1 class=post-title>
Java Priority Queue(우선순위 큐) 원리 및 사용 방법
</h1>
<div class=post-meta><span title="2022-02-14 20:20:41 +0900 +0900">2월 14, 2022</span>&nbsp;·&nbsp;4 분&nbsp;·&nbsp;Haseop&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/java/priority-queue/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<div class=post-content><h2 id=우선순위-큐priority-queue-란>우선순위 큐(Priority Queue) 란?<a hidden class=anchor aria-hidden=true href=#우선순위-큐priority-queue-란>#</a></h2>
<p>우선순위 큐(Priority Queue)는 일반적인 큐의 구조와 달리 들어가는 순서와 상관없이 <code>정의한</code>대로 우선순위를 먼저 결정하고 그
우선순위가 높은 데이터가 먼저 나가는 자료구조 입니다.
그렇기 때문에 dequeue를 하면 이미 정의한 순서에 맞게 가장 위의 값이 나타납니다.<br>
우선순위 큐는 힙을 기반으로 하는 <code>완전이진트리로 우선순위</code>를 정하게 됩니다.</p>
<h2 id=사용-방법>사용 방법<a hidden class=anchor aria-hidden=true href=#사용-방법>#</a></h2>
<p>우선순위 큐는 우선순위가 꼭 필요한 경우에 사용합니다.
람다식으로 정의해도 되고 Comparable을 이용해서 정의해도 됩니다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=c1>// 낮은 숫자가 우선순위가 높은 방식
</span><span class=c1></span><span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;();</span>
<span class=c1>// 높은 숫자가 우선순위가 높은 방식
</span><span class=c1></span><span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;(</span><span class=n>Collections</span><span class=o>.</span><span class=na>reverseOrder</span><span class=o>());</span>
<span class=c1>// 이중 배열에서 0번째 낮은 숫자가 우선순위가 높은 방식(람다식)
</span><span class=c1></span><span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;((</span><span class=n>o1</span><span class=o>,</span> <span class=n>o2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>o1</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>o2</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
<span class=c1>// 이중 배열에서 0번째 낮은 숫자가 우선순위가 높은 방식(Comparator)
</span><span class=c1></span><span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;(</span><span class=k>new</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;()</span> <span class=o>{</span>
    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>o1</span><span class=o>,</span> <span class=kt>int</span><span class=o>[]</span> <span class=n>o2</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>o1</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>-</span> <span class=n>o2</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
    <span class=o>};</span>
<span class=o>});</span>
</code></pre></div><p>위 처럼 다양한 방법으로 우선순위를 정할 수 있습니다.</p>
<h2 id=간단한-예제-및-원리>간단한 예제 및 원리<a hidden class=anchor aria-hidden=true href=#간단한-예제-및-원리>#</a></h2>
<p>간단히 예를 들어 가장 작은 수를 기준으로 우선순위 큐를 만들면</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;();</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>2</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>3</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>4</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>5</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>6</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>7</span><span class=o>);</span>
</code></pre></div><p><img loading=lazy src=./images/image001.png#center alt=image>
<br>
의 형태로 만들어집니다.</p>
<p>그렇지만 각각 enqueue할 때는 이진트리의 마지막부분에서 조건에 맞게 값이 들어가는거죠.<br>
위의 경우는 가장작은 수부터 차례로 들어가기 때문에 swap을 하지 않고 값이 들어가게됩니다.<br>
그렇지만 만약 큰 수부터 우선순위 큐를 하게 되면</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=n>PriorityQueue</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>pq</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PriorityQueue</span><span class=o>&lt;&gt;(</span><span class=n>Collections</span><span class=o>.</span><span class=na>reverseOrder</span><span class=o>());</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>2</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>3</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>4</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>5</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>6</span><span class=o>);</span>
<span class=n>pq</span><span class=o>.</span><span class=na>offer</span><span class=o>(</span><span class=n>7</span><span class=o>);</span>
</code></pre></div><p><img loading=lazy src=./images/image002.png#center alt=image>
<br>
의 형태로 만들어집니다.
위의 순서를 그림으로 그리면 아래와 같은 순서로 완전 이진트리 형태로 값이 들어갑니다.<br>
<img loading=lazy src=./images/image003.png#center alt=image>
</p>
<p>조건에 맞게 우선 가장 마지막 노드에 값이 들어가고 부모와 비교를 해서 자신의 위치를 찾아가는 것이죠.</p>
<p>반대로 dequeue인 poll()의 경우는 우선 Root를 제거하고 가장 마지막의 노드를 Root로 가져온 뒤 자식노드 중 자신보다 우선순위가 높은 값이 있다면 Swap을 하여 자신의 위치를 찾아가는 식입니다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=k>while</span> <span class=o>(!</span><span class=n>pq</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
    <span class=n>pq</span><span class=o>.</span><span class=na>poll</span><span class=o>();</span>
<span class=o>}</span>
</code></pre></div><p><img loading=lazy src=./images/image004.png#center alt=image>
</p>
<p>실제로 코드 내부로 들어가면 <code>enqueue</code>의 경우는 아래와 같이 <code>Comparable</code>로 정의하고 부모 노드와 현재 노드를 변경하는 코드가 들어가 있습니다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>offer</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>if</span> <span class=o>(</span><span class=n>e</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
        <span class=k>throw</span> <span class=k>new</span> <span class=n>NullPointerException</span><span class=o>();</span>
    <span class=n>modCount</span><span class=o>++;</span>
    <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>size</span><span class=o>;</span>
    <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>queue</span><span class=o>.</span><span class=na>length</span><span class=o>)</span>
        <span class=n>grow</span><span class=o>(</span><span class=n>i</span> <span class=o>+</span> <span class=n>1</span><span class=o>);</span>
    <span class=n>siftUp</span><span class=o>(</span><span class=n>i</span><span class=o>,</span> <span class=n>e</span><span class=o>);</span>
    <span class=n>size</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span>
    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
<span class=o>}</span>

<span class=kd>private</span> <span class=kt>void</span> <span class=nf>siftUp</span><span class=o>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>,</span> <span class=n>E</span> <span class=n>x</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>if</span> <span class=o>(</span><span class=n>comparator</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span>
        <span class=n>siftUpUsingComparator</span><span class=o>(</span><span class=n>k</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>queue</span><span class=o>,</span> <span class=n>comparator</span><span class=o>);</span>
    <span class=k>else</span>
        <span class=n>siftUpComparable</span><span class=o>(</span><span class=n>k</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>queue</span><span class=o>);</span>
<span class=o>}</span>

<span class=kd>private</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=kt>void</span> <span class=nf>siftUpComparable</span><span class=o>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>,</span> <span class=n>T</span> <span class=n>x</span><span class=o>,</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>es</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>Comparable</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>key</span> <span class=o>=</span> <span class=o>(</span><span class=n>Comparable</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;)</span> <span class=n>x</span><span class=o>;</span>
    <span class=k>while</span> <span class=o>(</span><span class=n>k</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>parent</span> <span class=o>=</span> <span class=o>(</span><span class=n>k</span> <span class=o>-</span> <span class=n>1</span><span class=o>)</span> <span class=o>&gt;&gt;&gt;</span> <span class=n>1</span><span class=o>;</span>
        <span class=n>Object</span> <span class=n>e</span> <span class=o>=</span> <span class=n>es</span><span class=o>[</span><span class=n>parent</span><span class=o>];</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>key</span><span class=o>.</span><span class=na>compareTo</span><span class=o>((</span><span class=n>T</span><span class=o>)</span> <span class=n>e</span><span class=o>)</span> <span class=o>&gt;=</span> <span class=n>0</span><span class=o>)</span>
            <span class=k>break</span><span class=o>;</span>
        <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>e</span><span class=o>;</span>
        <span class=n>k</span> <span class=o>=</span> <span class=n>parent</span><span class=o>;</span>
    <span class=o>}</span>
    <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>key</span><span class=o>;</span>
<span class=o>}</span>

<span class=kd>private</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=kt>void</span> <span class=nf>siftUpUsingComparator</span><span class=o>(</span>
    <span class=kt>int</span> <span class=n>k</span><span class=o>,</span> <span class=n>T</span> <span class=n>x</span><span class=o>,</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>es</span><span class=o>,</span> <span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>cmp</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>while</span> <span class=o>(</span><span class=n>k</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>parent</span> <span class=o>=</span> <span class=o>(</span><span class=n>k</span> <span class=o>-</span> <span class=n>1</span><span class=o>)</span> <span class=o>&gt;&gt;&gt;</span> <span class=n>1</span><span class=o>;</span>
        <span class=n>Object</span> <span class=n>e</span> <span class=o>=</span> <span class=n>es</span><span class=o>[</span><span class=n>parent</span><span class=o>];</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>cmp</span><span class=o>.</span><span class=na>compare</span><span class=o>(</span><span class=n>x</span><span class=o>,</span> <span class=o>(</span><span class=n>T</span><span class=o>)</span> <span class=n>e</span><span class=o>)</span> <span class=o>&gt;=</span> <span class=n>0</span><span class=o>)</span>
            <span class=k>break</span><span class=o>;</span>
        <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>e</span><span class=o>;</span>
        <span class=n>k</span> <span class=o>=</span> <span class=n>parent</span><span class=o>;</span>
    <span class=o>}</span>
    <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>x</span><span class=o>;</span>
<span class=o>}</span>
</code></pre></div><p>마찬가지로 <code>dequeue</code>의 경우도 <code>Comparable</code>로 정의하고 child 노드와 현재 노드를 변경하는 식의 코드가 들어있습니다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=n>E</span> <span class=nf>poll</span><span class=o>()</span> <span class=o>{</span>
    <span class=kd>final</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>es</span><span class=o>;</span>
    <span class=kd>final</span> <span class=n>E</span> <span class=n>result</span><span class=o>;</span>

    <span class=k>if</span> <span class=o>((</span><span class=n>result</span> <span class=o>=</span> <span class=o>(</span><span class=n>E</span><span class=o>)</span> <span class=o>((</span><span class=n>es</span> <span class=o>=</span> <span class=n>queue</span><span class=o>)[</span><span class=n>0</span><span class=o>]))</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>modCount</span><span class=o>++;</span>
        <span class=kd>final</span> <span class=kt>int</span> <span class=n>n</span><span class=o>;</span>
        <span class=kd>final</span> <span class=n>E</span> <span class=n>x</span> <span class=o>=</span> <span class=o>(</span><span class=n>E</span><span class=o>)</span> <span class=n>es</span><span class=o>[(</span><span class=n>n</span> <span class=o>=</span> <span class=o>--</span><span class=n>size</span><span class=o>)];</span>
        <span class=n>es</span><span class=o>[</span><span class=n>n</span><span class=o>]</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>n</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
            <span class=kd>final</span> <span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>cmp</span><span class=o>;</span>
            <span class=k>if</span> <span class=o>((</span><span class=n>cmp</span> <span class=o>=</span> <span class=n>comparator</span><span class=o>)</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
                <span class=n>siftDownComparable</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>es</span><span class=o>,</span> <span class=n>n</span><span class=o>);</span>
            <span class=k>else</span>
                <span class=n>siftDownUsingComparator</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=n>x</span><span class=o>,</span> <span class=n>es</span><span class=o>,</span> <span class=n>n</span><span class=o>,</span> <span class=n>cmp</span><span class=o>);</span>
        <span class=o>}</span>
    <span class=o>}</span>
    <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
<span class=o>}</span>

<span class=kd>private</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=kt>void</span> <span class=nf>siftDownComparable</span><span class=o>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>,</span> <span class=n>T</span> <span class=n>x</span><span class=o>,</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>es</span><span class=o>,</span> <span class=kt>int</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span>
    <span class=c1>// assert n &gt; 0;
</span><span class=c1></span>    <span class=n>Comparable</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>key</span> <span class=o>=</span> <span class=o>(</span><span class=n>Comparable</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;)</span><span class=n>x</span><span class=o>;</span>
    <span class=kt>int</span> <span class=n>half</span> <span class=o>=</span> <span class=n>n</span> <span class=o>&gt;&gt;&gt;</span> <span class=n>1</span><span class=o>;</span>           <span class=c1>// loop while a non-leaf
</span><span class=c1></span>    <span class=k>while</span> <span class=o>(</span><span class=n>k</span> <span class=o>&lt;</span> <span class=n>half</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>child</span> <span class=o>=</span> <span class=o>(</span><span class=n>k</span> <span class=o>&lt;&lt;</span> <span class=n>1</span><span class=o>)</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span> <span class=c1>// assume left child is least
</span><span class=c1></span>        <span class=n>Object</span> <span class=n>c</span> <span class=o>=</span> <span class=n>es</span><span class=o>[</span><span class=n>child</span><span class=o>];</span>
        <span class=kt>int</span> <span class=n>right</span> <span class=o>=</span> <span class=n>child</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>right</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span>
            <span class=o>((</span><span class=n>Comparable</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;)</span> <span class=n>c</span><span class=o>).</span><span class=na>compareTo</span><span class=o>((</span><span class=n>T</span><span class=o>)</span> <span class=n>es</span><span class=o>[</span><span class=n>right</span><span class=o>])</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span>
            <span class=n>c</span> <span class=o>=</span> <span class=n>es</span><span class=o>[</span><span class=n>child</span> <span class=o>=</span> <span class=n>right</span><span class=o>];</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>key</span><span class=o>.</span><span class=na>compareTo</span><span class=o>((</span><span class=n>T</span><span class=o>)</span> <span class=n>c</span><span class=o>)</span> <span class=o>&lt;=</span> <span class=n>0</span><span class=o>)</span>
            <span class=k>break</span><span class=o>;</span>
        <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>c</span><span class=o>;</span>
        <span class=n>k</span> <span class=o>=</span> <span class=n>child</span><span class=o>;</span>
    <span class=o>}</span>
    <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>key</span><span class=o>;</span>
<span class=o>}</span>

<span class=kd>private</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=kt>void</span> <span class=nf>siftDownUsingComparator</span><span class=o>(</span>
    <span class=kt>int</span> <span class=n>k</span><span class=o>,</span> <span class=n>T</span> <span class=n>x</span><span class=o>,</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>es</span><span class=o>,</span> <span class=kt>int</span> <span class=n>n</span><span class=o>,</span> <span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>cmp</span><span class=o>)</span> <span class=o>{</span>
    <span class=c1>// assert n &gt; 0;
</span><span class=c1></span>    <span class=kt>int</span> <span class=n>half</span> <span class=o>=</span> <span class=n>n</span> <span class=o>&gt;&gt;&gt;</span> <span class=n>1</span><span class=o>;</span>
    <span class=k>while</span> <span class=o>(</span><span class=n>k</span> <span class=o>&lt;</span> <span class=n>half</span><span class=o>)</span> <span class=o>{</span>
        <span class=kt>int</span> <span class=n>child</span> <span class=o>=</span> <span class=o>(</span><span class=n>k</span> <span class=o>&lt;&lt;</span> <span class=n>1</span><span class=o>)</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span>
        <span class=n>Object</span> <span class=n>c</span> <span class=o>=</span> <span class=n>es</span><span class=o>[</span><span class=n>child</span><span class=o>];</span>
        <span class=kt>int</span> <span class=n>right</span> <span class=o>=</span> <span class=n>child</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>right</span> <span class=o>&lt;</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=n>cmp</span><span class=o>.</span><span class=na>compare</span><span class=o>((</span><span class=n>T</span><span class=o>)</span> <span class=n>c</span><span class=o>,</span> <span class=o>(</span><span class=n>T</span><span class=o>)</span> <span class=n>es</span><span class=o>[</span><span class=n>right</span><span class=o>])</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span>
            <span class=n>c</span> <span class=o>=</span> <span class=n>es</span><span class=o>[</span><span class=n>child</span> <span class=o>=</span> <span class=n>right</span><span class=o>];</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>cmp</span><span class=o>.</span><span class=na>compare</span><span class=o>(</span><span class=n>x</span><span class=o>,</span> <span class=o>(</span><span class=n>T</span><span class=o>)</span> <span class=n>c</span><span class=o>)</span> <span class=o>&lt;=</span> <span class=n>0</span><span class=o>)</span>
            <span class=k>break</span><span class=o>;</span>
        <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>c</span><span class=o>;</span>
        <span class=n>k</span> <span class=o>=</span> <span class=n>child</span><span class=o>;</span>
    <span class=o>}</span>
    <span class=n>es</span><span class=o>[</span><span class=n>k</span><span class=o>]</span> <span class=o>=</span> <span class=n>x</span><span class=o>;</span>
<span class=o>}</span>
</code></pre></div>
</div>
<footer class=post-footer>
<ul class=post-tags>
</ul>
</footer>
<section class=comments>
<script>loadComment();function loadComment(){document.body.className.includes("dark")?theme='photon-dark':theme='boxy-light';let a=document.createElement('script');a.src='https://utteranc.es/client.js',a.setAttribute('repo','haservi/haservi.github.io'),a.setAttribute('issue-term','pathname'),a.setAttribute('theme',theme),a.setAttribute('crossorigin','anonymous'),a.setAttribute('async',''),document.querySelector('section.comments').innerHTML='',document.querySelector('section.comments').appendChild(a)}</script>
</section>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://haservi.github.io/>Halog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(a=>{mediumZoom(a,{margin:0,background:'#1d1e20',scrollOffset:40,container:null,template:null})})</script>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark')),loadComment()})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='복사';function d(){a.innerHTML='복사 완료!',setTimeout(()=>{a.innerHTML='복사'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>